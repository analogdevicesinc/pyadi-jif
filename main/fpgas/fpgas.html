<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>FPGA Configuration &#8212; pyadi-jif v0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../_static/app.min.css?v=0ea85bdb" />
    <link rel="stylesheet" type="text/css" href="../_static/css/style.css?v=632a43e7" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=57cfd03c"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script defer="" src="../_static/app.umd.js?v=25136f1d"></script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="FPGA Clocking" href="fpga_internal.html" />
    <link rel="prev" title="FPGAs" href="index.html" />
   
  
  <meta name="repository" content="None">
  <meta name="version" content="">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button value="search" class="icon"></button>
      <span id="search-progress"></span>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../index.html">
          <div>pyadi-jif</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root/>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">FPGA Configuration</a><ul>
<li><a class="reference internal" href="#xilinx-fpgas">Xilinx FPGAs</a><ul>
<li><a class="reference internal" href="#selecting-qpll-or-cpll">Selecting QPLL or CPLL</a></li>
<li><a class="reference internal" href="#current-known-limitations">Current known limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#intel-fpgas">Intel FPGAs</a></li>
<li><a class="reference internal" href="#example-usage">Example usage</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="logo" href="../index.html">
      <img class="only-light" src="../_static/imgs/PyADI-JIF_logo.png"/>
      <img class="only-dark" src="../_static/imgs/PyADI-PyADI-JIF_logo_w.png"/>
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root/>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing PyADI-JIF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flow.html">Usage Flows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../converters.html">Data converters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clocks.html">Clock chips</a></li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="index.html">FPGAs</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">FPGA Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="fpga_internal.html">FPGA Clocking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../parts.html">Supported Parts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../defs.html">JESD204 Definitions</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../devs/index.html">Reference APIs</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../devs/converters.html">Converter Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devs/clocks.html">Clock Chip Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devs/fpga_ref.html">FPGA Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devs/jesd.html">JESD204 Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developers.html">Developer documentation</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body-header">
    <nav class="breadcrumb">
        <ol>
          <li><a href="index.html">FPGAs</a></li>
          </ol>
    </nav>
  </div>

          <div class="body" role="main">
            
  <section id="fpga-configuration">
<h1>FPGA Configuration<a class="headerlink" href="#fpga-configuration" title="Permalink to this heading"></a></h1>
<p>FPGA clock models focus upon the PLLs inside different FPGA variants that drive different transceivers which connect to data converters. Currently, only specific Xilinx FPGA models are supported, but more are planned. However, the configurations determined by <strong>pyadi-jif</strong> are in the context of the <a class="reference external" href="https://wiki.analog.com/resources/tools-software/linux-drivers/jesd204/jesd204-fsm-framework">ADI JESD Interface Framework</a> and their related HDL cores. This is important since IP from different vendors have different supported modes.</p>
<p>The FPGA models are similar to converter models but they require converter objects to be passed to them for configuration. From the converter objects the FPGA classes can derive the dependent clocks and JESD configuration. Due to this limitation, FPGA classes cannot be used standalone like data converter or clock chip classes.</p>
<p>The second primary limitation is that the FPGA hardware model must be known and set beforehand. The FPGA hardware model determines clock ranges, internal PLL limits, and transceiver constraints. Since these can vary widely, making the internal solvers directly determine supported FPGAs would be a very burdensome task. However, <strong>pyadi-jif</strong> could be called in a loop to validate against different FPGA hardware models.</p>
<p>!!! note “<strong>pyadi-jif</strong> is not endorsed or verified by Xilinx or Intel”</p>
<section id="xilinx-fpgas">
<h2>Xilinx FPGAs<a class="headerlink" href="#xilinx-fpgas" title="Permalink to this heading"></a></h2>
<p>For Xilinx FPGAs both 7000 and Ultrascale device types can be parameterized. However, since specifications can vary widely depending on chip model or board, extensive configuration needs to be provided. A pre-existing table of boards can be leveraged through the <code class="docutils literal notranslate"><span class="pre">setup_by_dev_kit_name</span></code> method. This includes support for:</p>
<ul class="simple">
<li><p>ZC706</p></li>
<li><p>ZCU102</p></li>
<li><p>VCU118</p></li>
</ul>
<p>Otherwise to manually configure an FPGA object requires setting the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fpga</span><span class="o">.</span><span class="n">transceiver_voltage</span> <span class="o">=</span> <span class="mi">800</span>
<span class="n">fpga</span><span class="o">.</span><span class="n">transciever_type</span> <span class="o">=</span> <span class="s2">&quot;GTX2&quot;</span>
<span class="n">fpga</span><span class="o">.</span><span class="n">fpga_family</span> <span class="o">=</span> <span class="s2">&quot;Zynq&quot;</span>
<span class="n">fpga</span><span class="o">.</span><span class="n">fpga_package</span> <span class="o">=</span> <span class="s2">&quot;FF&quot;</span>
<span class="n">fpga</span><span class="o">.</span><span class="n">speed_grade</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span>
<span class="n">fpga</span><span class="o">.</span><span class="n">ref_clock_min</span> <span class="o">=</span> <span class="mi">60000000</span>
<span class="n">fpga</span><span class="o">.</span><span class="n">ref_clock_max</span> <span class="o">=</span> <span class="mi">670000000</span>
<span class="n">fpga</span><span class="o">.</span><span class="n">max_serdes_lanes</span> <span class="o">=</span> <span class="mi">8</span>

</pre></div>
</div>
<section id="selecting-qpll-or-cpll">
<h3>Selecting QPLL or CPLL<a class="headerlink" href="#selecting-qpll-or-cpll" title="Permalink to this heading"></a></h3>
<p>Both CPLL and QPLL types are supported and can either be automatically determined or forced to use either. This is done through two class properties:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sys</span> <span class="o">=</span> <span class="n">adijif</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;ad9680&quot;</span><span class="p">,</span> <span class="s2">&quot;ad9523_1&quot;</span><span class="p">,</span> <span class="s2">&quot;xilinx&quot;</span><span class="p">,</span> <span class="n">vcxo</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">sys</span><span class="o">.</span><span class="n">fpga</span><span class="o">.</span><span class="n">force_cpll</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Force use of CPLL</span>
<span class="c1"># or</span>
<span class="n">sys</span><span class="o">.</span><span class="n">fpga</span><span class="o">.</span><span class="n">force_qpll</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Force use of QPLL</span>
<span class="c1"># or (Default) let solver select</span>
<span class="n">sys</span><span class="o">.</span><span class="n">fpga</span><span class="o">.</span><span class="n">force_cpll</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sys</span><span class="o">.</span><span class="n">fpga</span><span class="o">.</span><span class="n">force_qpll</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The solver tries to use the CPLL since it is more flexible architecturally. For more detail on the 7000 Series PLL architecture consult <a class="reference external" href="https://www.xilinx.com/support/documentation/user_guides/ug476_7Series_Transceivers.pdf">ug476</a>.</p>
</section>
<section id="current-known-limitations">
<h3>Current known limitations<a class="headerlink" href="#current-known-limitations" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>When multiple converters are connected to the same FPGA, or RX and TX from the same converter, the solver does not force the clocks to come from a single QTile.</p></li>
</ul>
</section>
</section>
<section id="intel-fpgas">
<h2>Intel FPGAs<a class="headerlink" href="#intel-fpgas" title="Permalink to this heading"></a></h2>
<p>None supported yet.</p>
</section>
<section id="example-usage">
<h2>Example usage<a class="headerlink" href="#example-usage" title="Permalink to this heading"></a></h2>
<p>As mentioned the FPGA classes can not be used standalone. Therefore, the system class must be used when interfacing with the solvers. Below is a simple example based around using the <a class="reference external" href="https://www.analog.com/en/design-center/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad-fmcdaq2-ebz.html">AD-FMCDAQ2-EBZ</a> and a Xilinx ZC706.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create instance of system class with desired parts</span>
<span class="n">sys</span> <span class="o">=</span> <span class="n">adijif</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;ad9680&quot;</span><span class="p">,</span> <span class="s2">&quot;ad9523_1&quot;</span><span class="p">,</span> <span class="s2">&quot;xilinx&quot;</span><span class="p">,</span> <span class="mi">125000000</span><span class="p">)</span>
<span class="c1"># Set Converter clocking requirements</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">sample_clock</span> <span class="o">=</span> <span class="mf">1e9</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">decimation</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">L</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">M</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">N</span> <span class="o">=</span> <span class="mi">14</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">Np</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">K</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">F</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1"># Set FPGA clocking requirements</span>
<span class="n">sys</span><span class="o">.</span><span class="n">fpga</span><span class="o">.</span><span class="n">setup_by_dev_kit_name</span><span class="p">(</span><span class="s2">&quot;zc706&quot;</span><span class="p">)</span>
<span class="c1"># Call solver and collect configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;fpga&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Sample Output</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span><span class="s1">&#39;band&#39;</span>:<span class="w"> </span><span class="m">1</span>.0,
<span class="w"> </span><span class="s1">&#39;d&#39;</span>:<span class="w"> </span><span class="m">1</span>.0,
<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span><span class="m">1</span>.0,
<span class="w"> </span><span class="s1">&#39;n&#39;</span>:<span class="w"> </span><span class="m">100</span>.0,
<span class="w"> </span><span class="s1">&#39;qty4_full_rate_enabled&#39;</span>:<span class="w"> </span><span class="m">0</span>.0,
<span class="w"> </span><span class="s1">&#39;type&#39;</span>:<span class="w"> </span><span class="s1">&#39;qpll&#39;</span>,
<span class="w"> </span><span class="s1">&#39;vco&#39;</span>:<span class="w"> </span><span class="m">10000000000</span>.0<span class="o">}</span>
</pre></div>
</div>
<p>The output in this case shows that the QPLL is used (probably required), the upper band related to VCO1 is used, and all the necessary dividers are provided for configuration.</p>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="index.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">FPGAs</a>
    <a href="fpga_internal.html" title="Next document (Alt+Shift+RightArrow)" class="next">FPGA Clocking</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2020-2025, Analog Devices Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>