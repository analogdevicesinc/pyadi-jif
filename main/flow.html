<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="pyadi-jif at its core is a modeling tool for configuration and can be used to determine configurations at the component and system levels." name="description" />

    <title>Usage Flows &#8212; pyadi-jif v0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="_static/app.min.css?v=fc454092" />
    <link rel="stylesheet" type="text/css" href="_static/css/style.css?v=632a43e7" />
    <script defer="" src="_static/app.umd.js?v=a81630d9"></script>
    <link rel="icon" href="_static/favicon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data converters" href="converters.html" />
    <link rel="prev" title="Installing PyADI-JIF" href="install.html" />
   
  
  <meta name="repository" content="pyadi-jif">
  <meta name="version" content="">
  
    <meta name="page_source_suffix" content=".md">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button class="icon"></button>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com" aria-label="Analog Devices Inc. landing page"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="index.html">
          <div>pyadi-jif</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="./index.html" class="current">pyadi-jif</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Usage Flows</a><ul>
<li><a class="reference internal" href="#component-level">Component Level</a><ul>
<li><a class="reference internal" href="#ad9523-1-component-example">AD9523-1 Component Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#system-level">System Level</a><ul>
<li><a class="reference internal" href="#ad-fmcdaq2-ebz-adc-side-system-example">AD-FMCDAQ2-EBZ ADC Side System Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="logo" href="index.html">
      <img class="only-light" src="_static/logos/PyADI-JIF_logo_cropped.png"/>
      <img class="only-dark" src="_static/logos/PyADI-JIF_logo_w_cropped.png"/>
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="./index.html" class="current">pyadi-jif</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing PyADI-JIF</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage Flows</a></li>
<li class="toctree-l1"><a class="reference internal" href="converters.html">Data converters</a></li>
<li class="toctree-l1"><a class="reference internal" href="clocks.html">Clock chips</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="fpgas/index.html">FPGAs</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="fpgas/fpgas.html">FPGA Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="fpgas/fpga_internal.html">FPGA Clocking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="parts.html">Supported Parts</a></li>
<li class="toctree-l1"><a class="reference internal" href="defs.html">JESD204 Definitions</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="devs/index.html">Reference APIs</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="devs/converters.html">Converter Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="devs/clocks.html">Clock Chip Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="devs/plls.html">PLLs Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="devs/fpga_ref.html">FPGA Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="devs/jesd.html">JESD204 Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="draw.html">Drawings</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developer documentation</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          
          <div class="body" role="main">
            
  <section id="usage-flows">
<h1>Usage Flows<a class="headerlink" href="#usage-flows" title="Link to this heading"></a></h1>
<p><strong>pyadi-jif</strong> at its core is a modeling tool for configuration and can be used to determine configurations at the component and system levels.</p>
<ul class="simple">
<li><p><em>Component level</em>: Certain components can be isolated or used standalone like clock chip models. This is useful when compartmentalizing a problem or checking an existing configuration.</p></li>
<li><p><em>System level</em>: When all or most of the top-level constraints need to be modeled together leveraging the system classes provides the most consistent connection between the constraints across the components that must work together.</p></li>
</ul>
<section id="component-level">
<h2>Component Level<a class="headerlink" href="#component-level" title="Link to this heading"></a></h2>
<p>When working at the component level each component’s settings can be constrained or left unconstrained. Since each class’s implementation will model possible settings as well as their limitations, any user-applied constraints are checked for validity. By default, all settings are left unconstrained. Constraints for divider settings and clocks can be scalars, lists, or even ranges. This applies to dividers and clock rates.</p>
<p>Below is an example of a configuration of a clock chip where the three desired output clocks and VCXO are supplied but the internal dividers need to be determined. The input divider <strong>n2</strong> is also constrained to 24 as well. Without applying this constraint, the solver could set <strong>n2</strong> to values between 12 and 255.</p>
<section id="ad9523-1-component-example">
<h3>AD9523-1 Component Example<a class="headerlink" href="#ad9523-1-component-example" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">adijif</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pprint</span>
<span class="c1"># Create instance of AD9523-1 clocking model</span>
<span class="n">clk</span> <span class="o">=</span> <span class="n">adijif</span><span class="o">.</span><span class="n">ad9523_1</span><span class="p">()</span>
<span class="c1"># Constrain feedback divider n2 to only 24</span>
<span class="n">clk</span><span class="o">.</span><span class="n">n2</span> <span class="o">=</span> <span class="mi">24</span>
<span class="c1"># Define clock sources and output clocks</span>
<span class="n">vcxo</span> <span class="o">=</span> <span class="mi">125000000</span>
<span class="n">output_clocks</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1e9</span><span class="p">,</span> <span class="mf">500e6</span><span class="p">,</span> <span class="mf">7.8125e6</span><span class="p">]</span>
<span class="n">clock_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ADC&quot;</span><span class="p">,</span> <span class="s2">&quot;FPGA&quot;</span><span class="p">,</span> <span class="s2">&quot;SYSREF&quot;</span><span class="p">]</span>
<span class="n">clk</span><span class="o">.</span><span class="n">set_requested_clocks</span><span class="p">(</span><span class="n">vcxo</span><span class="p">,</span> <span class="n">output_clocks</span><span class="p">,</span> <span class="n">clock_names</span><span class="p">)</span>
<span class="c1"># Call solver and collect configuration</span>
<span class="n">clk</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">clk</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
</pre></div>
</div>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Clock output</span><a class="headerlink" href="#id1" title="Link to this code"></a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;m1&#39;: 3,
 &#39;n2&#39;: 24,
 &#39;out_dividers&#39;: [1, 2, 128],
 &#39;output_clocks&#39;: {&#39;ADC&#39;: {&#39;divider&#39;: 1, &#39;rate&#39;: 1000000000.0},
                   &#39;FPGA&#39;: {&#39;divider&#39;: 2, &#39;rate&#39;: 500000000.0},
                   &#39;SYSREF&#39;: {&#39;divider&#39;: 128, &#39;rate&#39;: 7812500.0}},
 &#39;part&#39;: &#39;AD9523-1&#39;,
 &#39;r2&#39;: 1,
 &#39;vco&#39;: 1000000000.0,
 &#39;vcxo&#39;: 125000000}
</pre></div>
</div>
</div>
<p>After the solver runs successfully, all the internal dividers and clocks are provided in a single dictionary.</p>
<p>Alternatively a range for the VCXO could be provided using the types classes as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">vcxo</span> <span class="o">=</span> <span class="n">adijif</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mi">100000000</span><span class="p">,</span> <span class="mi">251000000</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">,</span> <span class="s2">&quot;vcxo&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, any VCXO could be used in the range 100 MHz to 250 MHz in 1 MHz steps.</p>
</section>
</section>
<section id="system-level">
<h2>System Level<a class="headerlink" href="#system-level" title="Link to this heading"></a></h2>
<p>When component constraints need to be mixed together the <strong>system</strong> class is used and is designed to support an FPGA, clock chip, and multiple data converters. Below is an example of the system class usage for a board similar to <a class="icon link reference external" href="https://www.analog.com/en/design-center/evaluation-hardware-and-software/evaluation-boards-kits/eval-ad-fmcdaq2-ebz.html" target="_blank">AD-FMCDAQ2-EBZ</a>, but just looking at the ADC side alone.</p>
<section id="ad-fmcdaq2-ebz-adc-side-system-example">
<h3>AD-FMCDAQ2-EBZ ADC Side System Example<a class="headerlink" href="#ad-fmcdaq2-ebz-adc-side-system-example" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">adijif</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pprint</span>
<span class="n">vcxo</span> <span class="o">=</span> <span class="mi">125000000</span>
<span class="c1"># Create instance of system class with desired parts</span>
<span class="n">sys</span> <span class="o">=</span> <span class="n">adijif</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;ad9680&quot;</span><span class="p">,</span> <span class="s2">&quot;ad9523_1&quot;</span><span class="p">,</span> <span class="s2">&quot;xilinx&quot;</span><span class="p">,</span> <span class="n">vcxo</span><span class="p">)</span>
<span class="c1"># Set Converter clocking requirements</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">sample_clock</span> <span class="o">=</span> <span class="mf">1e9</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">decimation</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">L</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">M</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">N</span> <span class="o">=</span> <span class="mi">14</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">Np</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">K</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">F</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1"># Set FPGA clocking requirements</span>
<span class="n">sys</span><span class="o">.</span><span class="n">fpga</span><span class="o">.</span><span class="n">setup_by_dev_kit_name</span><span class="p">(</span><span class="s2">&quot;zc706&quot;</span><span class="p">)</span>
<span class="c1"># Call solver and collect configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">System output</span><a class="headerlink" href="#id2" title="Link to this code"></a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;clock&#39;: {&#39;m1&#39;: 3,
           &#39;n2&#39;: 24,
           &#39;out_dividers&#39;: [1, 32, 4, 4],
           &#39;output_clocks&#39;: {&#39;AD9680_ref_clk&#39;: {&#39;divider&#39;: 1,
                                                &#39;rate&#39;: 1000000000.0},
                             &#39;AD9680_sysref&#39;: {&#39;divider&#39;: 32,
                                               &#39;rate&#39;: 31250000.0},
                             &#39;zc706_AD9680_device_clk&#39;: {&#39;divider&#39;: 4,
                                                         &#39;rate&#39;: 250000000.0},
                             &#39;zc706_AD9680_ref_clk&#39;: {&#39;divider&#39;: 4,
                                                      &#39;rate&#39;: 250000000.0}},
           &#39;part&#39;: &#39;AD9523-1&#39;,
           &#39;r2&#39;: 1,
           &#39;vco&#39;: 1000000000.0,
           &#39;vcxo&#39;: 125000000},
 &#39;converter&#39;: [],
 &#39;converter_AD9680&#39;: {&#39;clocking_option&#39;: &#39;direct&#39;, &#39;decimation&#39;: 1},
 &#39;fpga_AD9680&#39;: {&#39;d&#39;: 1,
                 &#39;device_clock_source&#39;: &#39;external&#39;,
                 &#39;m&#39;: 1,
                 &#39;n&#39;: 40,
                 &#39;out_clk_select&#39;: &#39;XCVR_REFCLK&#39;,
                 &#39;sys_clk_select&#39;: &#39;XCVR_QPLL0&#39;,
                 &#39;transport_samples_per_clock&#39;: 4.0,
                 &#39;type&#39;: &#39;qpll&#39;,
                 &#39;vco&#39;: 10000000000.0},
 &#39;jesd_AD9680&#39;: {&#39;CS&#39;: 0,
                 &#39;F&#39;: 1,
                 &#39;HD&#39;: 1,
                 &#39;K&#39;: 32,
                 &#39;L&#39;: 4,
                 &#39;M&#39;: 2,
                 &#39;Np&#39;: 16,
                 &#39;S&#39;: 1,
                 &#39;bit_clock&#39;: 10000000000.0,
                 &#39;converter_clock&#39;: 1000000000.0,
                 &#39;jesd_class&#39;: &#39;jesd204b&#39;,
                 &#39;jesd_mode&#39;: &#39;136&#39;,
                 &#39;multiframe_clock&#39;: 31250000.0,
                 &#39;sample_clock&#39;: 1000000000.0}}
</pre></div>
</div>
</div>
<p>The output in this case contains information for all three components. Listing divider settings, certain enabled modes, and clock rates. The ADC is directly clocked so it requires no configuration.</p>
<p>Alternatively, the output dividers <strong>d</strong> could be limited to power of two:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">clock</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="o">**</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">)]</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;clock&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Clock output</span><a class="headerlink" href="#id3" title="Link to this code"></a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;m1&#39;: 3,
 &#39;n2&#39;: 24,
 &#39;out_dividers&#39;: [1, 32, 4, 4],
 &#39;output_clocks&#39;: {&#39;AD9680_ref_clk&#39;: {&#39;divider&#39;: 1, &#39;rate&#39;: 1000000000.0},
                   &#39;AD9680_sysref&#39;: {&#39;divider&#39;: 32, &#39;rate&#39;: 31250000.0},
                   &#39;zc706_AD9680_device_clk&#39;: {&#39;divider&#39;: 4,
                                               &#39;rate&#39;: 250000000.0},
                   &#39;zc706_AD9680_ref_clk&#39;: {&#39;divider&#39;: 4, &#39;rate&#39;: 250000000.0}},
 &#39;part&#39;: &#39;AD9523-1&#39;,
 &#39;r2&#39;: 1,
 &#39;vco&#39;: 1000000000.0,
 &#39;vcxo&#39;: 125000000}
</pre></div>
</div>
</div>
</section>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="install.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">Installing PyADI-JIF</a>
    <a href="converters.html" title="Next document (Alt+Shift+RightArrow)" class="next">Data converters</a>
              </div>
          
        </div>
      </div>
  </div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2020-2025, Analog Devices Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>