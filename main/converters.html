<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Data converters &#8212; pyadi-jif v0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="_static/app.min.css?v=cad18f0a" />
    <link rel="stylesheet" type="text/css" href="_static/css/style.css?v=632a43e7" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=57cfd03c"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script defer="" src="_static/app.umd.js?v=dcfbb431"></script>
    <link rel="icon" href="_static/favicon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Clock chips" href="clocks.html" />
    <link rel="prev" title="Usage Flows" href="flow.html" />
   
  
  <meta name="repository" content="None">
  <meta name="version" content="">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button value="search" class="icon"></button>
      <span id="search-progress"></span>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="index.html">
          <div>pyadi-jif</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root/>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Data converters</a><ul>
<li><a class="reference internal" href="#clocking-architectures">Clocking architectures</a></li>
<li><a class="reference internal" href="#configuring-converters">Configuring converters</a></li>
<li><a class="reference internal" href="#nested-converters">Nested converters</a></li>
<li><a class="reference internal" href="#external-pll-clocking">External PLL Clocking</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="logo" href="index.html">
      <img class="only-light" src="_static/imgs/PyADI-JIF_logo.png"/>
      <img class="only-dark" src="_static/imgs/PyADI-PyADI-JIF_logo_w.png"/>
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root/>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing PyADI-JIF</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Usage Flows</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data converters</a></li>
<li class="toctree-l1"><a class="reference internal" href="clocks.html">Clock chips</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="fpgas/index.html">FPGAs</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="fpgas/fpgas.html">FPGA Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="fpgas/fpga_internal.html">FPGA Clocking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="parts.html">Supported Parts</a></li>
<li class="toctree-l1"><a class="reference internal" href="defs.html">JESD204 Definitions</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="devs/index.html">Reference APIs</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="devs/converters.html">Converter Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="devs/clocks.html">Clock Chip Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="devs/fpga_ref.html">FPGA Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="devs/jesd.html">JESD204 Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developer documentation</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section id="data-converters">
<h1>Data converters<a class="headerlink" href="#data-converters" title="Permalink to this heading"></a></h1>
<p>Four types of data converters are supported: ADCs, DACs, transceivers, and ADC/DAC combinations. However, fundamentally from a clocking perspective, it does not matter if a component is a DAC or ADC, and integrated parts like transceivers only have more constraints. It is also possible to connect multiple converters into the same system and jointly present these requirements to clock chips and FPGAs also in the system.</p>
<section id="clocking-architectures">
<h2>Clocking architectures<a class="headerlink" href="#clocking-architectures" title="Permalink to this heading"></a></h2>
<p><strong>pyadi-jif</strong> supports both direct clocking and on-board PLL generation for different converters. Assuming the desired parts support those features. Usually, an external clock generation source, like a PLL, is used to have better phase noise performance. However, routing faster clocks can be challenging above 10 GHz. If a part does support both options (like the <a class="reference external" href="https://www.analog.com/en/products/ad9081.html">AD9081</a>) the internal solver does not look across both options. One mode must be selected before the solver is called. If both options are available the internal PLL is used by default. This is set through the property <strong>use_direct_clocking</strong>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sys</span> <span class="o">=</span> <span class="n">adijif</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;ad9081_rx&quot;</span><span class="p">,</span> <span class="s2">&quot;hmc7044&quot;</span><span class="p">,</span> <span class="s2">&quot;xilinx&quot;</span><span class="p">,</span> <span class="n">vcxo</span><span class="p">)</span>
<span class="c1"># Enable internal PLL</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">use_direct_clocking</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>Below is a diagram of the <a class="reference external" href="https://www.analog.com/en/products/ad9081.html">AD9081</a> internal clock generation PLL. <strong>pyadi-jif</strong> determines the necessary input clock (CLOCK RECEIVER) and dividers (D,M,N,R,L) for a given data rate specification.</p>
<p><img alt="AD9081 PLL" src="_images/ad9081_pll.png" /></p>
</section>
<section id="configuring-converters">
<h2>Configuring converters<a class="headerlink" href="#configuring-converters" title="Permalink to this heading"></a></h2>
<p>Currently converter objects cannot be used outside of the system class when leveraging solvers. Standalone they could be used to evaluate basic JESD parameters and clocks, but you cannot solve for internal dividers standalone. Here is an example below of examining different effective rates based on the JESD configuration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cnv</span> <span class="o">=</span> <span class="n">adijif</span><span class="o">.</span><span class="n">ad9680</span><span class="p">()</span>
<span class="n">cnv</span><span class="o">.</span><span class="n">sample_clock</span> <span class="o">=</span> <span class="mf">1e9</span>
<span class="n">cnv</span><span class="o">.</span><span class="n">decimation</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">cnv</span><span class="o">.</span><span class="n">L</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">cnv</span><span class="o">.</span><span class="n">M</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">cnv</span><span class="o">.</span><span class="n">N</span> <span class="o">=</span> <span class="mi">14</span>
<span class="n">cnv</span><span class="o">.</span><span class="n">Np</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">cnv</span><span class="o">.</span><span class="n">K</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">cnv</span><span class="o">.</span><span class="n">F</span> <span class="o">=</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cnv</span><span class="o">.</span><span class="n">bit_clock</span><span class="p">,</span> <span class="n">cnv</span><span class="o">.</span><span class="n">multiframe_clock</span><span class="p">,</span> <span class="n">cnv</span><span class="o">.</span><span class="n">device_clock</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">10000000000</span>.0<span class="w"> </span><span class="m">31250000</span>.0<span class="w"> </span><span class="m">250000000</span>.0
</pre></div>
</div>
</section>
<section id="nested-converters">
<h2>Nested converters<a class="headerlink" href="#nested-converters" title="Permalink to this heading"></a></h2>
<p>For devices with both ADCs and DACs like transceivers or mixed-signal front-ends, nested models are used that model both ADC and DAC paths together. This is important since they can share a common device clock or reference clock but have different JESD link configurations. <a class="reference external" href="https://www.analog.com/en/products/ad9081.html">AD9081</a>) is an example of a part that has such an implementation. AD9081 also has RX or TX only models.</p>
<p>When using a nested converter model there are sub-properties <strong>adc</strong> and <strong>dac</strong> which handle the individual configurations. When the solver is called the cross configurations are validated first then possible clocking configurations are explored. Below is an example of this type of converter model in use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up system model with nested AD9081 model</span>
<span class="n">sys</span> <span class="o">=</span> <span class="n">adijif</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;ad9081&quot;</span><span class="p">,</span> <span class="s2">&quot;hmc7044&quot;</span><span class="p">,</span> <span class="s2">&quot;xilinx&quot;</span><span class="p">,</span> <span class="mi">125000000</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">fpga</span><span class="o">.</span><span class="n">setup_by_dev_kit_name</span><span class="p">(</span><span class="s2">&quot;zc706&quot;</span><span class="p">)</span>
<span class="c1"># Use built in PLLs</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">dac</span><span class="o">.</span><span class="n">use_direct_clocking</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">use_direct_clocking</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1"># Set DAC clocking requirements</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">dac</span><span class="o">.</span><span class="n">sample_clock</span> <span class="o">=</span> <span class="mf">250e6</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">dac</span><span class="o">.</span><span class="n">datapath</span><span class="o">.</span><span class="n">cduc_interpolation</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">dac</span><span class="o">.</span><span class="n">L</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">dac</span><span class="o">.</span><span class="n">M</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">dac</span><span class="o">.</span><span class="n">N</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">dac</span><span class="o">.</span><span class="n">Np</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">dac</span><span class="o">.</span><span class="n">K</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">dac</span><span class="o">.</span><span class="n">F</span> <span class="o">=</span> <span class="mi">4</span>
<span class="c1"># Set ADC clocking requirements</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">sample_clock</span> <span class="o">=</span> <span class="mf">250e6</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">datapath</span><span class="o">.</span><span class="n">cddc_decimations</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">datapath</span><span class="o">.</span><span class="n">fddc_decimations</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="mi">8</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">datapath</span><span class="o">.</span><span class="n">fddc_enabled</span> <span class="o">=</span> <span class="p">[</span><span class="kc">False</span><span class="p">]</span><span class="o">*</span><span class="mi">8</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">L</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">M</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">N</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">Np</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">K</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">adc</span><span class="o">.</span><span class="n">F</span> <span class="o">=</span> <span class="mi">4</span>
</pre></div>
</div>
</section>
<section id="external-pll-clocking">
<h2>External PLL Clocking<a class="headerlink" href="#external-pll-clocking" title="Permalink to this heading"></a></h2>
<p>Sometimes it is necessary to use an external PLL to clock a converter which may not necessarily come directly from a clock chip. This is done be inserting a PLL between the clock chip and the converter. The API do insert an external PLL is done through the system classâ€™s <strong>add_pll_inline</strong> method. Below is a basic example with the ADF4371:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">vcxo</span> <span class="o">=</span> <span class="mf">100e6</span>
<span class="n">sys</span> <span class="o">=</span> <span class="n">adijif</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;ad9081&quot;</span><span class="p">,</span> <span class="s2">&quot;hmc7044&quot;</span><span class="p">,</span> <span class="s2">&quot;xilinx&quot;</span><span class="p">,</span> <span class="n">vcxo</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="s2">&quot;CPLEX&quot;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">fpga</span><span class="o">.</span><span class="n">setup_by_dev_kit_name</span><span class="p">(</span><span class="s2">&quot;zcu102&quot;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="o">.</span><span class="n">clocking_option</span> <span class="o">=</span> <span class="s2">&quot;direct&quot;</span>

<span class="n">sys</span><span class="o">.</span><span class="n">add_pll_inline</span><span class="p">(</span><span class="s2">&quot;adf4371&quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">clock</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">converter</span><span class="p">)</span>
</pre></div>
</div>
<p>The <strong>add_pll_inline</strong> method requires a name of a desired PLL, the object of the clock chip, and the object of the target converter you wish to drive with the PLL.</p>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="flow.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">Usage Flows</a>
    <a href="clocks.html" title="Next document (Alt+Shift+RightArrow)" class="next">Clock chips</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2020-2025, Analog Devices Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>